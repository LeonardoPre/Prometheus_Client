{
  "id": "6688b3a8-8b19-4973-aeb4-f2d80fa28c47",
  "sut": "teastore",
  "workloads": [
    {
      "name": "shaped",
      "description": "Workload with custom load shape behavior.",
      "workload_runtime": 1800,
      "timeout_duration": 3000,
      "workload_settings": {
        "LOADGENERATOR_STAGE_DURATION": 225,
        "LOADGENERATOR_MAX_DAILY_USERS": 100
      },
      "locust_files": [
        "sut_configs/workloads/teastore/consumerbehavior.py",
        "sut_configs/workloads/teastore/loadshapes.py",
        "sut_configs/workloads/teastore/config.py"
      ]
    }
  ],
  "variants": [
    {
      "name": "baseline",
      "target_branch": "vanilla",
      "critical_services": [
        "teastore-auth",
        "teastore-registry",
        "teastore-webui"
      ],
      "colocated_workload": true,
      "autoscaling": "cpu",
      "max_autoscale": 3,
      "description": "Baseline experiment for the teastore application"
    }
  ],
  "timestamp": "2026-02-03_20-43-56",
  "n_iterations": 1,
  "deploy_only": false,
  "configs": {
    "env_config": {
      "SUT_CONFIGS_PATH": "/app/sut_configs",
      "CLUE_CONFIG_PATH": "/app/clue-config.yaml",
      "RESULTS_PATH": "/app/data",
      "LOG_LEVEL": "INFO",
      "SUT": "teastore",
      "VARIANTS": [
        "baseline"
      ],
      "WORKLOADS": [
        "shaped"
      ],
      "N_ITERATIONS": 1,
      "DEPLOY_ONLY": false,
      "GRAFANA_USERNAME": "admin",
      "GRAFANA_PASSWORD": "prom-operator",
      "GRAFANA_URL": "grafana",
      "GRAFANA_PORT": "3000",
      "SETUP_GRAFANA_DASHBOARD": "false",
      "SUT_CONFIG_PATH": "/app/sut_configs/teastore.yaml"
    },
    "clue_config": {
      "prometheus_url": "http://localhost:9090",
      "local_public_ip": "registry",
      "local_port": 5000,
      "remote_platform_arch": "linux/amd64",
      "local_platform_arch": "linux/amd64",
      "docker_registry_address": "leonardopr2",
      "target_utilization": 70
    },
    "sut_config": {
      "sut": "teastore",
      "sut_path": "teastore",
      "sut_git_repo": "https://github.com/clue2-sose25/sustainable_teastore.git",
      "helm_chart_path": "teastore/examples/helm",
      "helm_chart_repo": "",
      "helm_dependencies_from_chart": false,
      "values_yaml_name": "values.yaml",
      "namespace": "teastore",
      "infrastructure_namespaces": [],
      "workload_target": "teastore-webui",
      "application_endpoint_path": "/tools.descartes.teastore.webui",
      "default_resource_limits": {
        "cpu": 500,
        "memory": 612
      },
      "wait_before_workloads": 10,
      "wait_after_workloads": 10,
      "timeout_for_services_ready": 240,
      "helm_replacements": [
        {
          "value": "descartesresearch",
          "replacement": "leonardopr2",
          "conditions": null
        },
        {
          "value": "nodeSelector: {}",
          "replacement": "nodeSelector: {\"scaphandre\": \"true\"}",
          "conditions": null
        },
        {
          "value": "pullPolicy: IfNotPresent",
          "replacement": "pullPolicy: Always",
          "conditions": null
        },
        {
          "value": "tag: \"\"",
          "replacement": "tag: \"__EXPERIMENT_TAG__\"",
          "conditions": null
        },
        {
          "value": "enabled: false",
          "replacement": "enabled: true",
          "conditions": {
            "autoscaling": true,
            "autoscaling_type": ""
          }
        },
        {
          "value": "targetCPUUtilizationPercentage: 80",
          "replacement": "# targetCPUUtilizationPercentage: 80",
          "conditions": {
            "autoscaling": true,
            "autoscaling_type": "mem"
          }
        },
        {
          "value": "# targetMemoryUtilizationPercentage: 80",
          "replacement": "targetMemoryUtilizationPercentage: 80",
          "conditions": {
            "autoscaling": true,
            "autoscaling_type": "mem"
          }
        },
        {
          "value": "# targetMemoryUtilizationPercentage: 80",
          "replacement": "targetMemoryUtilizationPercentage: 80",
          "conditions": {
            "autoscaling": true,
            "autoscaling_type": "full"
          }
        }
      ],
      "variants": [
        {
          "name": "baseline",
          "target_branch": "vanilla",
          "critical_services": [
            "teastore-auth",
            "teastore-registry",
            "teastore-webui"
          ],
          "colocated_workload": true,
          "autoscaling": "cpu",
          "max_autoscale": 3,
          "description": "Baseline experiment for the teastore application"
        },
        {
          "name": "runtime-replacement",
          "target_branch": "runtime-replacement",
          "critical_services": [
            "teastore-auth",
            "teastore-registry",
            "teastore-webui"
          ],
          "colocated_workload": true,
          "autoscaling": "cpu",
          "max_autoscale": 3,
          "description": "Replaces the JVM runtime with a more recent version."
        },
        {
          "name": "monolith",
          "target_branch": "monolith",
          "critical_services": [
            "teastore-all"
          ],
          "colocated_workload": true,
          "autoscaling": "cpu",
          "max_autoscale": 3,
          "description": "Runs the teastore application as a monolith, without microservices. Not tested with CLUE2."
        },
        {
          "name": "serverless",
          "target_branch": "serverless-auth",
          "critical_services": [
            "teastore-registry",
            "teastore-webui"
          ],
          "colocated_workload": true,
          "autoscaling": "cpu",
          "max_autoscale": 3,
          "description": "Runs the authentication service in a serverless fashion using Knative. Not tested with CLUE2."
        },
        {
          "name": "norec",
          "target_branch": "service-reduction",
          "critical_services": [
            "teastore-auth",
            "teastore-registry",
            "teastore-webui"
          ],
          "colocated_workload": true,
          "autoscaling": "cpu",
          "max_autoscale": 3,
          "description": "Runs the application without the recommender service. Not tested with CLUE2."
        },
        {
          "name": "lessrec",
          "target_branch": "feature/lessrecs",
          "critical_services": [
            "teastore-auth",
            "teastore-registry",
            "teastore-webui"
          ],
          "colocated_workload": true,
          "autoscaling": "cpu",
          "max_autoscale": 3,
          "description": "Reduces the number of recommendations shown to users. Not tested with CLUE2."
        },
        {
          "name": "obs",
          "target_branch": "feature/object-storage",
          "critical_services": [
            "teastore-auth",
            "teastore-registry",
            "teastore-webui"
          ],
          "colocated_workload": true,
          "autoscaling": "cpu",
          "max_autoscale": 3,
          "description": "Uses object storage for storing images. Not tested with CLUE2. Not tested with CLUE2."
        },
        {
          "name": "dbopt",
          "target_branch": "feature/db-optimization",
          "critical_services": [
            "teastore-auth",
            "teastore-registry",
            "teastore-webui"
          ],
          "colocated_workload": true,
          "autoscaling": "cpu",
          "max_autoscale": 3,
          "description": "Implements database optimizations. Not tested with CLUE2."
        },
        {
          "name": "car",
          "target_branch": "Carbon-Aware-Retraining",
          "critical_services": [
            "teastore-auth",
            "teastore-registry",
            "teastore-webui"
          ],
          "colocated_workload": true,
          "autoscaling": "cpu",
          "max_autoscale": 3,
          "description": "Implements carbon-aware retraining for the recommender. Not tested with CLUE2."
        },
        {
          "name": "sig",
          "target_branch": "ssg+api-gateway",
          "critical_services": [
            "teastore-auth",
            "teastore-registry",
            "teastore-webui"
          ],
          "colocated_workload": true,
          "autoscaling": "cpu",
          "max_autoscale": 3,
          "description": "Implements static site generation and API gateway. Not tested with CLUE2."
        }
      ],
      "workloads": [
        {
          "name": "shaped",
          "description": "Workload with custom load shape behavior.",
          "workload_runtime": 1800,
          "timeout_duration": 3000,
          "workload_settings": {
            "LOADGENERATOR_STAGE_DURATION": 225,
            "LOADGENERATOR_MAX_DAILY_USERS": 100
          },
          "locust_files": [
            "sut_configs/workloads/teastore/consumerbehavior.py",
            "sut_configs/workloads/teastore/loadshapes.py",
            "sut_configs/workloads/teastore/config.py"
          ]
        },
        {
          "name": "rampup",
          "description": "Workload that ramps up users at a constant rate.",
          "workload_runtime": 20,
          "timeout_duration": 120,
          "workload_settings": {
            "LOCUST_SPAWN_RATE": 3,
            "LOCUST_USERS": 100
          },
          "locust_files": [
            "sut_configs/workloads/teastore/locustfile.py"
          ]
        },
        {
          "name": "pausing",
          "description": "Workload that starts 20 pausing users, no ramp-up for the duration.",
          "workload_runtime": 64,
          "timeout_duration": 120,
          "workload_settings": {
            "LOCUST_SPAWN_RATE": 1,
            "LOCUST_USERS": 10,
            "PAUSE_BACKOFF": 120
          },
          "locust_files": [
            "sut_configs/workloads/teastore/pausing_users.py"
          ]
        },
        {
          "name": "fixed",
          "description": "Workload that ramps up to max users for at most 1000 requests (failed or successful), running for at most the specified duration.",
          "workload_runtime": 64,
          "timeout_duration": 120,
          "workload_settings": {
            "LOCUST_SPAWN_RATE": 1,
            "LOCUST_USERS": 100,
            "MAXIMUM_REQUESTS": 200
          },
          "locust_files": [
            "sut_configs/workloads/teastore/fixed_requests.py"
          ]
        },
        {
          "name": "shaped-long",
          "description": "Workload with custom load shape behavior.",
          "workload_runtime": 1800,
          "timeout_duration": 2200,
          "workload_settings": {
            "LOADGENERATOR_STAGE_DURATION": 120,
            "LOADGENERATOR_MAX_DAILY_USERS": 100
          },
          "locust_files": [
            "sut_configs/workloads/teastore/consumerbehavior.py",
            "sut_configs/workloads/teastore/loadshapes.py",
            "sut_configs/workloads/teastore/config.py"
          ]
        },
        {
          "name": "rampup-long",
          "description": "Workload that ramps up users at a constant rate.",
          "workload_runtime": 600,
          "timeout_duration": 800,
          "workload_settings": {
            "LOCUST_SPAWN_RATE": 3,
            "LOCUST_USERS": 100
          },
          "locust_files": [
            "sut_configs/workloads/teastore/locustfile.py"
          ]
        },
        {
          "name": "pausing-long",
          "description": "Workload that starts 20 pausing users, no ramp-up for the duration.",
          "workload_runtime": 128,
          "timeout_duration": 240,
          "workload_settings": {
            "LOCUST_SPAWN_RATE": 1,
            "LOCUST_USERS": 10,
            "PAUSE_BACKOFF": 120
          },
          "locust_files": [
            "sut_configs/workloads/teastore/pausing_users.py"
          ]
        },
        {
          "name": "fixed-long",
          "description": "Workload that ramps up to max users for at most 1000 requests (failed or successful), running for at most the specified duration.",
          "workload_runtime": 128,
          "timeout_duration": 240,
          "workload_settings": {
            "LOCUST_SPAWN_RATE": 1,
            "LOCUST_USERS": 100,
            "MAXIMUM_REQUESTS": 200
          },
          "locust_files": [
            "sut_configs/workloads/teastore/fixed_requests.py"
          ]
        },
        {
          "name": "shaped-no-timeout",
          "description": "Workload with custom load shape behavior.",
          "workload_runtime": 64,
          "timeout_duration": 12000,
          "workload_settings": {
            "LOADGENERATOR_STAGE_DURATION": 8,
            "LOADGENERATOR_MAX_DAILY_USERS": 100
          },
          "locust_files": [
            "sut_configs/workloads/teastore/consumerbehavior.py",
            "sut_configs/workloads/teastore/loadshapes.py",
            "sut_configs/workloads/teastore/config.py"
          ]
        }
      ],
      "resource_limits": [
        {
          "service_name": "teastore-auth",
          "limit": {
            "cpu": 225,
            "memory": 612
          }
        },
        {
          "service_name": "teastore-webui",
          "limit": {
            "cpu": 500,
            "memory": 750
          }
        },
        {
          "service_name": "teastore-recommender",
          "limit": {
            "cpu": 500,
            "memory": 612
          }
        },
        {
          "service_name": "teastore-image",
          "limit": {
            "cpu": 500,
            "memory": 750
          }
        },
        {
          "service_name": "teastore-all",
          "limit": {
            "cpu": 500,
            "memory": 1024
          }
        }
      ],
      "target_host": "http://teastore-webui/tools.descartes.teastore.webui"
    }
  }
}